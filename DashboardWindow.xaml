<Window x:Class="PanelNikeStore.DashboardWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:PanelNikeStore"
        mc:Ignorable="d"
        Title="Nike Basketball - Dashboard Admin" Height="720" Width="1280" 
        WindowStartupLocation="CenterScreen" Background="{DynamicResource WindowBackground}">

    <Window.Resources>
        <!-- Style pour les boutons de menu principal -->
        <Style x:Key="MainMenuButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{DynamicResource SidebarText}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="Padding" Value="15,12"/>
            <Setter Property="Margin" Value="0,2"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                        BorderBrush="{TemplateBinding BorderBrush}" 
                        BorderThickness="{TemplateBinding BorderThickness}"
                        CornerRadius="8">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="{TemplateBinding Tag}" 
                                   Margin="0,0,15,0" VerticalAlignment="Center"/>
                                <ContentPresenter Grid.Column="1" 
                                          HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                          VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                                <TextBlock Grid.Column="2" Text="›" Margin="5,0,0,0" 
                                   FontWeight="Bold" FontSize="16" VerticalAlignment="Center"/>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{DynamicResource MenuHover}"/>
                                <Setter Property="Foreground" Value="{DynamicResource PrimaryText}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="{DynamicResource MenuPressed}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Style pour les sous-menus -->
        <Style x:Key="SubMenuButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{DynamicResource SidebarSubMenuText}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="Padding" Value="35,8"/>
            <Setter Property="Margin" Value="0,1"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                        BorderBrush="{TemplateBinding BorderBrush}" 
                        BorderThickness="{TemplateBinding BorderThickness}"
                        CornerRadius="6">
                            <ContentPresenter 
                        HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                        VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                        Margin="{TemplateBinding Padding}"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{DynamicResource MenuHover}"/>
                                <Setter Property="Foreground" Value="{DynamicResource PrimaryText}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="{DynamicResource MenuPressed}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>


        <!-- Style pour les boutons d'action -->
        <Style x:Key="ActionButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#007BFF"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="15,10"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}" 
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="6">
                            <ContentPresenter 
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#0069D9"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#0062CC"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

    </Window.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="280"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Sidebar / Menu Navigation -->
        <Border Grid.Column="0" Background="{DynamicResource SidebarBackground}" 
        BorderBrush="{DynamicResource BorderBrush}" BorderThickness="0,0,1,0">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Logo et titre -->
                <StackPanel Grid.Row="0" Margin="0,25,0,30">
                    <TextBlock Text="NIKE BASKETBALL" FontSize="18" Foreground="{DynamicResource PrimaryText}" 
               FontWeight="Bold" HorizontalAlignment="Center"/>
                    <TextBlock Text="ADMIN PANEL" FontSize="12" Foreground="{DynamicResource SecondaryText}" 
               HorizontalAlignment="Center" Margin="0,5,0,0"/>
                </StackPanel>

                <!-- Menu principal avec sous-menus -->
                <ScrollViewer Grid.Row="1" Margin="15,0" VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                                                <!-- Catégorie Tableau de bord -->
                        <Button Style="{StaticResource MainMenuButtonStyle}" 
                                Tag="📊" Content="Tableau de bord"
                                Click="ShowDashboard_Click"/>
                        <!-- Catégorie Utilisateurs -->
                        <Button Style="{StaticResource MainMenuButtonStyle}" 
                                Tag="👥" Content="Utilisateurs"
                                Click="ToggleUsersSubMenu"/>

                        <!-- Sous-menu Utilisateurs -->
                        <StackPanel x:Name="UsersSubMenu" Visibility="Collapsed" Margin="0,0,0,10">
                            <Button Style="{StaticResource SubMenuButtonStyle}" 
                                    Content="Gérer les utilisateurs"
                                    Click="btnModifyClient_Click"/>
                            <Button Style="{StaticResource SubMenuButtonStyle}" 
                                    Content="Ajouter un utilisateur"
                                    Click="btnAddClient_Click"/>
                            <Button Style="{StaticResource SubMenuButtonStyle}" 
                                    Content="Gérer les rôles"
                                    Click="btnManageRoles_Click"/>
                        </StackPanel>

                        <!-- Catégorie Produits -->
                        <Button Style="{StaticResource MainMenuButtonStyle}" 
                                Tag="📦" Content="Produits"
                                Click="ToggleProductsSubMenu"/>

                        <!-- Sous-menu Produits -->
                        <StackPanel x:Name="ProductsSubMenu" Visibility="Collapsed" Margin="0,0,0,10">
                            <Button Style="{StaticResource SubMenuButtonStyle}" 
                                    Content="Gérer les stocks"
                                    Click="btnManageStock_Click"/>
                            <Button Style="{StaticResource SubMenuButtonStyle}" 
                                    Content="Modifier un produit"
                                    Click="btnModifyProduct_Click"/>
                            <Button Style="{StaticResource SubMenuButtonStyle}" 
                                    Content="Ajouter un produit"
                                    Click="btnAddProduct_Click"/>
                        </StackPanel>

                        <!-- Catégorie Commandes -->
                        <Button Style="{StaticResource MainMenuButtonStyle}" 
                                Tag="🛒" Content="Commandes"
                                Click="ToggleOrdersSubMenu"/>

                        <!-- Sous-menu Commandes -->
                        <StackPanel x:Name="OrdersSubMenu" Visibility="Collapsed" Margin="0,0,0,10">
                            <Button Style="{StaticResource SubMenuButtonStyle}" 
                                    Content="Suivi des commandes"
                                    Click="btnOrderTracking_Click"/>
                            <Button Style="{StaticResource SubMenuButtonStyle}" 
                                    Content="Modifier une commande"
                                    Click="btnModifyOrder_Click"/>
                            <Button x:Name="btnOrderHistory" Content="Historique des commandes"
            Style="{StaticResource SubMenuButtonStyle}"
            Click="btnOrderHistory_Click">
                                <Button.ContentTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">

                                            <TextBlock Text="{Binding}"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </Button.ContentTemplate>
                            </Button>
                        </StackPanel>
                    </StackPanel>
                </ScrollViewer>

                <!-- Paramètres du compte au bas du menu -->
                <StackPanel Grid.Row="2" Margin="15,10,15,20">
                    <Separator Background="{DynamicResource BorderBrush}" Margin="0,10"/>
                    <DockPanel Margin="0,10">
                        <ToggleButton x:Name="DarkModeToggle" DockPanel.Dock="Right"
                      Width="40" Height="20" Cursor="Hand" Content="🌙"
                      Click="DarkModeToggle_Click"/>
                        <TextBlock Text="Mode Sombre" Foreground="{DynamicResource SecondaryText}" 
                   VerticalAlignment="Center"/>
                    </DockPanel>
                    <Button Content="Déconnexion" Style="{StaticResource ActionButtonStyle}" 
            Background="{DynamicResource ErrorBrush}" Margin="0,10,0,0" Height="40"
            Click="btnLogout_Click"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Zone de contenu principale -->
        <Grid Grid.Column="1" Background="{DynamicResource WindowBackground}">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- En-tête -->
            <Border Grid.Row="0" Background="{DynamicResource ContentBackground}" 
            BorderBrush="{DynamicResource BorderBrush}" 
            BorderThickness="0,0,0,1" Padding="30,20">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Column="0" Text="Tableau de bord" 
                       FontSize="22" FontWeight="SemiBold" Foreground="{DynamicResource PrimaryText}"/>
                    <TextBlock Grid.Column="1" Text="Bienvenue, Admin" 
                       VerticalAlignment="Center" Foreground="{DynamicResource SecondaryText}"/>
                </Grid>
            </Border>

            <!-- Zone de contenu principal -->
            <ScrollViewer Grid.Row="1" Padding="30" VerticalScrollBarVisibility="Auto"
                  Background="{DynamicResource WindowBackground}">
                <!-- Zone pour les UserControls -->
                <Grid Background="{DynamicResource WindowBackground}">

                    <local:InfoCardControl x:Name="InfoCard" Visibility="Collapsed" 
                                           HorizontalAlignment="Left" VerticalAlignment="Top" 
                                           Width="300" Height="150" Margin="0,0,0,20"/>

                    <local:KPISectionControl x:Name="KPISection" Visibility="Visible"/>

                    <local:UserTableControl x:Name="UserTable" Visibility="Collapsed"/>

                    <local:AddUserControl x:Name="AddUserPanel" Visibility="Collapsed" />

                    <local:RoleManagementControl x:Name="RoleManagementPanel" Visibility="Collapsed" />


                </Grid>
            </ScrollViewer>
        </Grid>
    </Grid>
</Window>